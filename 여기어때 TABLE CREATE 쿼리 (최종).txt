
-- 관리자 아이디 / 비밀번호 :
-- ID : admin@admin.com
-- PW : admin1234! 
-- ( 참고 : 맨 밑에 INSERT 쿼리 있음 )



CREATE SEQUENCE THISREVIEW_REVIEW_NO_SEQ;

SELECT THISREVIEW_REVIEW_NO_SEQ.NEXTVAL
FROM DUAL;

CREATE SEQUENCE DELIVERY_NO_SEQ;

SELECT  DELIVERY_NO_SEQ.NEXTVAL
FROM    DUAL;

CREATE SEQUENCE TMSTMEMBER_M_NO_SEQ;

SELECT TMSTMEMBER_M_NO_SEQ.NEXTVAL
FROM DUAL;

CREATE TABLE TMSTCODEGRP (
	GRP_CODE	NUMBER	NOT NULL,
	GRP_CODENAME	VARCHAR2(100)	NULL
);

CREATE TABLE TMSTCODE (
	GRPCODE	NUMBER	NOT NULL,
	CODE	NUMBER	NOT NULL,
	CODENAME	VARCHAR2(500)	NULL
);

CREATE TABLE THISPUSHAL (
	AL_NO	NUMBER	NOT NULL,
	M_NO	NUMBER	NOT NULL,
	AL_CONTENT	VARCHAR(1000)	NULL,
	AL_GUBUN	NUMBER	NULL,
	ORDER_NO	NUMBER	NULL,
	DELIVERY_NO	NUMBER	NULL,
	AL_TIME	TIMESTAMP	NULL
);

CREATE TABLE TMSTMEMBER (
	M_NO	NUMBER	NOT NULL,
	M_EMAIL	VARCHAR2(50)	NULL,
	M_PW	VARCHAR2(200)	NULL,
	M_NAME	VARCHAR2(20)	NULL,
	M_TEL	VARCHAR(30)	NULL,
	M_SEC	NUMBER	NULL,
	M_POINT	NUMBER	NULL,
	M_ROADADDRESS	VARCHAR2(1000)	NULL,
	M_DETAILADDRESS  	VARCHAR2(2000) NULL,
	M_MARKETING	CHAR(1)	NULL,
	M_AREA1	NUMBER	NULL,
	M_AREA2	NUMBER	NULL,
	M_AREA3	NUMBER	NULL,
	M_THEME1	NUMBER	NULL,
	M_THEME2	NUMBER	NULL,
	M_THEME3	NUMBER	NULL,
	M_LOCK	CHAR(1)	NULL,
	M_EMAILCHECK	CHAR(1)	NULL
);

CREATE TABLE THISREVIEW (
	REVIEW_NO	NUMBER	NOT NULL,
	REPORT_NO	NUMBER	NULL,
	M_NO	NUMBER	NULL,
	S_NO	NUMBER	NULL,
	R_NO	NUMBER	NULL,
	PHOTO_URL	VARCHAR2(300)	NULL,
	REVIEW_RATE	NUMBER	default 0,
	LIKES	NUMBER	default 0,
	REVIEW_CONTENT	VARCHAR2(1000)	NULL,
	REVIEW_DATE	Date default sysdate,
	REVIEW_GROUP	NUMBER	NULL,
	REVIEW_STEP	NUMBER	NULL,
            RESTRICT_FLAG	CHAR(1) default 'N' NULL
);

CREATE TABLE THISDELIVERY (
	DELIVERY_NO	NUMBER	NOT NULL,
	EVENT_NO	NUMBER	NOT NULL,
	ITEM_NO	NUMBER	NOT NULL,
	M_NO	NUMBER	NOT NULL,
	DELIVERY_ADDR	VARCHAR2(1000)	NULL,
	STEP_FLAG	NUMBER	NULL,
	EVENT_DATE	TIMESTAMP	NULL,
	STEP1_DATE	TIMESTAMP	NULL,
	STEP2_DATE	TIMESTAMP	NULL,
	STEP3_DATE	TIMESTAMP	NULL
);

CREATE TABLE TMSTEVENT (
	EVENT_NO	NUMBER	NOT NULL,
	EVENT_NAME	VARCHAR2(300)	NULL,
	EVENT_INTRO	VARCHAR(3000)	NULL,
	EVENT_CONTENT	VARCHAR(3000)	NULL,
	EVENT_STARTDATE	TIMESTAMP	NULL,
	EVENT_ENDDATE	TIMESTAMP	NULL,
	EVENT_TARGET	VARCHAR(3000)	NULL,
	EVENT_CAUTION	VARCHAR(3000)	NULL,
	EVENT_FLAG	NUMBER	NULL,
	FILENAME	VARCHAR2(300)	NULL,
	FILENAME2	VARCHAR2(300)	NULL,
	EVENT_MEMBER_FLAG	CHAR(1)	NULL,
	M_NO1	NUMBER	NULL,
	M_NO2	NUMBER	NULL,
	M_NO3	NUMBER	NULL
);

CREATE TABLE THISORDERDTL (
	ORDER_NO	NUMBER	NOT NULL,
	S_NO	NUMBER	NOT NULL,
	R_NO	NUMBER	NOT NULL
);


CREATE TABLE THISCART (
	M_NO	NUMBER	NOT NULL,
	S_NO	NUMBER	NOT NULL,
	R_NO	NUMBER	NOT NULL
);

CREATE TABLE THISORDER (
	ORDER_NO	NUMBER	NOT NULL,
	M_NO	NUMBER	NOT NULL,
	S_NO	NUMBER	NULL,
	COUPON_NO	NUMBER	NULL,
	ORDER_DATE	TIMESTAMP	NULL,
	TOTAL_PRICE	NUMBER	NULL,
	DISCOUNT_PRICE	NUMBER	NULL,
	PAYMENT_PRICE	NUMBER	NULL,
	PAYMENT_METHOD	NUMBER	NULL,
	PAYMENT_CARDNO	VARCHAR2(1000)	NULL,
	PAYMENT_ACCOUNT	VARCHAR2(1000)	NULL,
	PAYMENT_FLAG	CHAR(1)	NULL,
	HOT_DEAL_FLAG	CHAR(1)	NULL,
	CHECK_IN_DATE	TIMESTAMP	NULL,
	CHECK_OUT_DATE	TIMESTAMP	NULL,
               REVIEW_FLAG          CHAR(1)  default 'N' NULL
);

CREATE TABLE THISREFUND (
	REFUND_NO	NUMBER	NOT NULL,
	ORDER_NO	NUMBER	NOT NULL,
	REFUND_REASON	NUMBER	NULL,
	REFUND_PRICE	NUMBER	NULL,
	REFUND_PERCENTAGE	NUMBER	NULL,
	STEP_FLAG	NUMBER	NULL,
	STEP1_DATE	TIMESTAMP	NULL,
	STEP2_DATE	TIMESTAMP	NULL
);


CREATE TABLE TMSTMENUDTL (
	SUB_MENU_NO	NUMBER	NOT NULL,
	MENU_SEQ	NUMBER	NOT NULL,
	MENU_NO	NUMBER	NOT NULL,
	SUB_MENU_NAME	VARCHAR2(500)	NULL,
	SUB_MENU_LINK	VARCHAR2(1000)	NULL,
	SUB_MENU_FLAG	CHAR(1)	NULL
);

CREATE TABLE TMSTITEM (
	EVENT_NO	NUMBER	NOT NULL,
	ITEM_NO	NUMBER	NOT NULL,
	ITEM_NAME	VARCHAR2(300)	NULL,
	ITEM_DESC	VARCHAR2(1000)	NULL,
	FILENAME	VARCHAR2(300)	NULL
);

CREATE TABLE THISATTEND (
	EVENT_NO	NUMBER	NOT NULL,
	M_NO	NUMBER	NOT NULL
);

CREATE TABLE TMSTROOM (
	R_NO	NUMBER	NOT NULL,
	S_NO	NUMBER	NOT NULL,
	R_NAME	VARCHAR2(100)	NULL,
	R_DETAIL	VARCHAR2(500)	NULL,
	R_PERSON_CNT	NUMBER	NULL,
	R_PRICE	NUMBER	NULL,
	R_IMG1	VARCHAR2(300)	NULL,
	R_IMG2	VARCHAR2(300)	NULL,
	R_IMG3	VARCHAR2(300)	NULL,
	R_SINGLE_BED_FLAG	 CHAR(1)	NULL,
	R_DOUBLE_BED_FLAG	CHAR(1)	NULL,
	R_QUEEN_BED_FLAG	 CHAR(1)	NULL,
	R_FACILITY1	NUMBER	NULL,
	R_FACILITY2	NUMBER	NULL,
	R_FACILITY3	NUMBER	NULL,
	R_FACILITY4	NUMBER	NULL,
	R_FACILITY5	NUMBER	NULL,
	R_FACILITY6	NUMBER	NULL
);

CREATE TABLE THISQNA (
	QNA_NO	NUMBER	NOT NULL,
	M_NO	NUMBER	NOT NULL,
	QNA_TYPE	NUMBER	NULL,
	QNA_QUESTION	VARCHAR2(300)	NULL,
	QNA_ANSWER	VARCHAR2(1000)	NULL,
	QNA_FLAG	CHAR(1)	NULL,
	QNA_FILE	VARCHAR2(300)	NULL
);

CREATE TABLE TMSTCOUPON (
	COUPON_NO	NUMBER	NOT NULL,
	COUPON_DETAIL	VARCHAR2(300)	NULL,
	COUPON_FLAG	CHAR(1)	NULL,
	COUPON_QTY	NUMBER	NULL
);

INSERT INTO TMSTCOUPON(COUPON_NO, COUPON_DETAIL, COUPON_FLAG, COUPON_QTY) VALUES(10000, '회원가입 쿠폰','Y', NULL);

CREATE TABLE THISCOUPON (
	M_NO	NUMBER	NOT NULL,
	COUPON_NO	NUMBER	NOT NULL,
	COUPON_QTY	NUMBER	NULL
);

CREATE TABLE THISUSECOUPON (
	COUPON_NO	NUMBER	NOT NULL,
	M_NO	NUMBER	NOT NULL,
	COUPON_USEFLAG	CHAR(1)	NULL,
	COUPON_DATE	TIMESTAMP	NULL,
	COUPON_USEDATE	TIMESTAMP	NULL
);

CREATE TABLE THISPOINT (
	POINT_NO	NUMBER	NOT NULL,
	M_NO	NUMBER	NOT NULL,
	ORDER_NO	NUMBER	NULL,
	POINT_TYPE	NUMBER	NULL,
	POINT_IN	NUMBER	NULL,
	POINT_OUT	NUMBER	NULL,
	POINT_USEDATE	TIMESTAMP	NULL
);

CREATE TABLE TMSTSTAY (
	S_NO	NUMBER	NOT NULL,
	S_NAME	VARCHAR2(100)	NULL,
	S_TYPE	NUMBER	NULL,
	S_INFO	VARCHAR2(3000)	NULL,
	S_LOCA	NUMBER	NULL,
	S_ADDR_X	VARCHAR2(100)	NULL,
	S_ADDR_Y	VARCHAR2(100)	NULL,
	S_IMG1	VARCHAR2(300)	NULL,
	S_IMG2	VARCHAR2(300)	NULL,
	S_IMG3	VARCHAR2(300)	NULL,
	S_ADDR	VARCHAR2(1000)	NULL,
	S_FACILITY1	NUMBER	NULL,
	S_FACILITY2	NUMBER	NULL,
	S_FACILITY3	NUMBER	NULL,
	S_FACILITY4	NUMBER	NULL,
	S_FACILITY5	NUMBER	NULL,
	S_FACILITY6	NUMBER	NULL,
	S_THEME1 	NUMBER	NULL,
	S_THEME2	 NUMBER	NULL,
	S_THEME3	 NUMBER	NULL,
	S_THEME4	 NUMBER	NULL,
	S_THEME5 	NUMBER	NULL,
	S_THEME6 	NUMBER	NULL,
	S_THEME7 	NUMBER	NULL,
	S_THEME8	 NUMBER	NULL,
	S_RATE	NUMBER	NULL
);

CREATE TABLE THISLIKE (
	REVIEW_ID	NUMBER	NOT NULL,
	M_NO	NUMBER	NOT NULL
);


CREATE TABLE TMSTMENU (
	MENU_SEQ	NUMBER	NOT NULL,
	MENU_NO	NUMBER	NOT NULL,
	MENU_NAME	VARCHAR2(100)	NULL,
	MENU_FLAG	CHAR(1)	NULL
);

CREATE TABLE TMSTDEAL (
	DEAL_NO	NUMBER	NOT NULL,
	S_NO	NUMBER	NULL,
	DEAL_START_DATE	TIMESTAMP	NULL,
	DEAL_END_DATE	TIMESTAMP	NULL,
	DEAL_STATUS	NUMBER	NULL,
	DEAL_DISCOUNT	NUMBER	NULL
);

CREATE TABLE THISREPORT (
	REPORT_NO	NUMBER	NOT NULL,
	REPORT_TYPE	NUMBER	NULL,
	REPORT_CONTENT	VARCHAR(3000)	NULL,
	REPORT_DATE	TIMESTAMP	NULL
);

CREATE TABLE THISINQUERY (
	QNA_NO	NUMBER	NOT NULL,
	M_NO	NUMBER	NOT NULL,
	INQUERY_TYPE	NUMBER	NULL,
	INQUERY_QUESTION	VARCHAR2(300)	NULL,
	INQUERY_QUESTION_DATE	TIMESTAMP	NULL,
	INQUERY_ANSWER	VARCHAR2(1000)	NULL,
	INQUERY_ANSWER_DATE	TIMESTAMP	NULL,
	INQUERY_FLAG	CHAR(1)	NULL,
	REVIEW_GROUP	NUMBER	NULL,
	INQUERY_STEP	NUMBER	NULL
);

ALTER TABLE TMSTMEMBER ADD CONSTRAINT PK_TMSTMEMBER PRIMARY KEY (
	M_NO
);

ALTER TABLE THISREVIEW ADD CONSTRAINT PK_THISREVIEW PRIMARY KEY (
	REVIEW_NO
);

ALTER TABLE THISDELIVERY ADD CONSTRAINT PK_THISDELIVERY PRIMARY KEY (
	DELIVERY_NO
);

ALTER TABLE TMSTEVENT ADD CONSTRAINT PK_TMSTEVENT PRIMARY KEY (
	EVENT_NO
);

ALTER TABLE THISORDER ADD CONSTRAINT PK_THISORDER PRIMARY KEY (
	ORDER_NO
);

ALTER TABLE THISREFUND ADD CONSTRAINT PK_THISREFUND PRIMARY KEY (
	REFUND_NO
);

ALTER TABLE TMSTMENUDTL ADD CONSTRAINT PK_TMSTMENUDTL PRIMARY KEY (
	SUB_MENU_NO
);

ALTER TABLE TMSTROOM ADD CONSTRAINT PK_TMSTROOM PRIMARY KEY (
	R_NO
);

ALTER TABLE THISQNA ADD CONSTRAINT PK_THISQNA PRIMARY KEY (
	QNA_NO
);

ALTER TABLE TMSTCOUPON ADD CONSTRAINT PK_TMSTCOUPON PRIMARY KEY (
	COUPON_NO
);

ALTER TABLE THISUSECOUPON ADD CONSTRAINT PK_THISUSECOUPON PRIMARY KEY (
	COUPON_NO,
	M_NO
);

ALTER TABLE THISPOINT ADD CONSTRAINT PK_THISPOINT PRIMARY KEY (
	POINT_NO
);

ALTER TABLE TMSTSTAY ADD CONSTRAINT PK_TMSTSTAY PRIMARY KEY (
	S_NO
);

ALTER TABLE THISLIKE ADD CONSTRAINT PK_THISLIKE PRIMARY KEY (
	Key
);

ALTER TABLE TMSTMENU ADD CONSTRAINT PK_TMSTMENU PRIMARY KEY (
	MENU_SEQ,
	MENU_NO
);

ALTER TABLE TMSTDEAL ADD CONSTRAINT PK_TMSTDEAL PRIMARY KEY (
	DEAL_NO
);

ALTER TABLE THISREPORT ADD CONSTRAINT PK_THISREPORT PRIMARY KEY (
	REPORT_NO
);

ALTER TABLE THISINQUERY ADD CONSTRAINT PK_THISINQUERY PRIMARY KEY (
	QNA_NO
);

ALTER TABLE THISPUSHAL ADD CONSTRAINT PK_THISPUSHAL PRIMARY KEY (
	AL_NO,
	M_NO
);

ALTER TABLE TMSTITEM ADD CONSTRAINT PK_TMSTITEM PRIMARY KEY (
	EVENT_NO,
	ITEM_NO
);

ALTER TABLE THISATTEND ADD CONSTRAINT PK_THISATTEND PRIMARY KEY (
	EVENT_NO,
	M_NO
);

ALTER TABLE THISCOUPON ADD CONSTRAINT PK_THISCOUPON PRIMARY KEY (
	M_NO,
	COUPON_NO
);
ALTER TABLE THISCART ADD CONSTRAINT PK_THISCART PRIMARY KEY (
	M_NO,
	S_NO,
	R_NO
);

-- 관리자 아이디 / 비밀번호 :
-- ID : admin@admin.com
-- PW : admin1234!

Insert into HR.TMSTMEMBER (M_NO,M_EMAIL,M_PW,M_NAME,M_TEL,M_SEC,M_POINT,M_ROADADDRESS,M_DETAILADDRESS,M_MARKETING,M_AREA1,M_AREA2,M_AREA3,M_THEME1,M_THEME2,M_THEME3,M_LOCK,M_EMAILCHECK) values (1,'admin@admin.com','mEwFAsgF6YPKrm15g7WjBQ==','관리자','01011112222',1,0,null,null,'N',null,null,null,null,null,null,'N','Y');

COMMIT;